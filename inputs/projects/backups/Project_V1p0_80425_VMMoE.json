{
  "project": {
    "metadata": {
      "id": "Project V1p8_80325_768_Pyramid_SGPS_080325",
      "name": "GTR-T5-Base Pyramid LN with Semantic GPS and Dynamic Routing",
      "description": "768D GTR-T5-Base → 768→384→512→384+Projection→512→384→768 Pyramid Architecture with SGPS Position Encoding, Projection Head and Dynamic Routing",
      "version": "1.31.25_GTR_Pyramid_SGPS_projection_DRH",
      "created_date": "2025-08-03",
      "pipeline_type": "pyramid_attention_nuclear_compression_with_sgps",
      "architecture_type": "768→384→512→384→512→384→768"
    },
    "model": "sentence-transformers/gtr-t5-base",
    "local_model_path": "data/teacher_models/gtr-t5-base"
  },
  "training": {
    "architecture": {
      "model_type": "pyramid_lnsp_with_semantic_gps",
      "input_dim": 768,
      "student_dim": 384,
      "teacher_dim": 768,
      "semantic_gps_config": {
        "enabled": true,
        "d_model": 384,
        "max_concepts": 100,
        "n_domains": 16,
        "temperature": 0.1,
        "use_dynamic_routing": true,
        "topographic_attention": true,
        "coordinate_tracking": true
      },
      "pyramid_ln_config": {
        "vector_native": true,
        "token_free": true,
        "nuclear_compression": true,
        "attention_enabled": true,
        "residual_connections": true,
        "symmetric_architecture": true,
        "compression_stages": [
          {"layer": "input_norm", "dim": 768, "type": "layer_norm"},
          {"layer": "input_dropout", "rate": 0.1, "type": "dropout"},
          {"layer": "compress_1", "in": 768, "out": 384, "type": "linear", "activation": "gelu"},
          {"layer": "compress_norm_1", "dim": 384, "type": "layer_norm"},
          {"layer": "compress_dropout_1", "rate": 0.1, "type": "dropout"},
          {"layer": "semantic_gps", "dim": 384, "type": "semantic_gps", "dynamic_routing": true},
          {"layer": "projection_head", "dim": 384, "type": "dimension_partitioning", "core_dims": 256, "spatial_dims": 64, "sequential_dims": 64},
          {"layer": "compress_2", "in": 384, "out": 512, "type": "linear", "activation": "gelu", "residual": true},
          {"layer": "compress_norm_2", "dim": 512, "type": "layer_norm"},
          {"layer": "compress_dropout_2", "rate": 0.1, "type": "dropout"},
          {"layer": "nuclear_compress", "in": 512, "out": 384, "type": "linear", "activation": "gelu"},
          {"layer": "bottleneck_norm", "dim": 384, "type": "layer_norm"},
          {"layer": "bottleneck_dropout", "rate": 0.15, "type": "dropout"},
          {"layer": "multi_head_attention", "dim": 384, "heads": 6, "type": "attention"},
          {"layer": "attention_norm", "dim": 384, "type": "layer_norm"},
          {"layer": "attention_dropout", "rate": 0.1, "type": "dropout"},
          {"layer": "nuclear_expand", "in": 384, "out": 512, "type": "linear", "activation": "gelu", "residual": true},  
          {"layer": "expand_norm_1", "dim": 512, "type": "layer_norm"},
          {"layer": "expand_dropout_1", "rate": 0.1, "type": "dropout"},
          {"layer": "expand_2", "in": 512, "out": 384, "type": "linear", "activation": "gelu", "residual": true},
          {"layer": "expand_norm_2", "dim": 384, "type": "layer_norm"},
          {"layer": "expand_dropout_2", "rate": 0.1, "type": "dropout"},
          {"layer": "projection_decode", "dim": 384, "type": "dimension_reconstruction", "core_dims": 256, "spatial_dims": 64, "sequential_dims": 64},
          {"layer": "teacher_align", "in": 384, "out": 768, "type": "linear", "activation": "gelu"},
          {"layer": "output_norm", "dim": 768, "type": "layer_norm"},
          {"layer": "output_l2_normalize", "dim": 768, "type": "l2_normalize"}
        ]
      },
      "attention_config": {
        "num_heads": 12,
        "dim_head": 32,
        "attention_dropout": 0.1,
        "scale_attention": true,
        "use_flash_attention": true,
        "attention_bias": true,
        "topographic_attention": true
      },
      "activation_config": {
        "primary_activation": "gelu",
        "use_swish": true,
        "leaky_relu_slope": 0.01
      },
      "regularization_config": {
        "use_spectral_norm": false,
        "weight_decay": 0.01,
        "gradient_clipping": 0.9,
        "layer_dropout_schedule": "linear"
      },
      "semantic_preservation": {
        "diversity_weight": 0.8,
        "alignment_weight": 1.0,
        "attention_diversity_weight": 0.154,
        "semantic_gps_enabled": true,
        "gps_clustering_loss_weight": 0.5,
        "gps_smoothness_loss_weight": 0.25,
        "gps_separation_loss_weight": 0.25,
        "gps_efficiency_loss_weight": 0.05,
        "gps_topographic_loss_weight": 0.15,
        "bottleneck_dim": 384,
        "diversity_enforcement": "extreme",
        "attention_diversity_enabled": true,
        "concept_separation_target": 0.75
      },
      "sequential_positioning": {
        "enabled": true,
        "max_sequence_length": 512,
        "fusion_strategy": "weighted_sum",
        "spatial_weight": 0.6,
        "sequential_weight": 0.4,
        "concept_memory_size": 1000,
        "track_transitions": true,
        "next_prediction_count": 5,
        "sequential_loss_weights": {
          "consistency_loss_weight": 0.3,
          "prediction_accuracy_weight": 0.4,
          "hybrid_consistency_weight": 0.2
        },
        "sequence_data_strategy": "simple_triplet",
        "min_sequence_length": 3,
        "max_concepts_per_sequence": 20,
        "sequence_overlap_ratio": 0.2
      },
      "projection_head": {
        "enabled": true,
        "type": "dimension_partitioning",
        "d_model": 384,
        "core_dims": 256,
        "spatial_dims": 64,
        "sequential_dims": 64,
        "use_learned_weights": true,
        "projection_layers": {
          "spatial_projector": {
            "enabled": true,
            "layer_norm": true,
            "activation": "gelu",
            "dropout_rate": 0.1
          },
          "sequential_projector": {
            "enabled": true,
            "layer_norm": true,
            "activation": "gelu",
            "dropout_rate": 0.1
          },
          "core_processor": {
            "enabled": true,
            "layer_norm": true,
            "activation": "gelu",
            "dropout_rate": 0.1
          }
        },
        "orthogonality_verification": {
          "enabled": true,
          "log_component_analysis": true,
          "dimension_separation_check": true
        },
        "fallback_strategy": "additive_fusion",
        "integration_point": "semantic_gps_layer"
      },
      "residual_config": {
        "enabled": true,
        "skip_layers": ["compress_2", "nuclear_expand"],
        "projection": true,
        "dim": 512
      },
      "qa_projection_head": {
        "enabled": true,
        "type": "question_answering",
        "nuclear_dim": 384,
        "output_dim": 768,
        "hidden_dims": [512, 768],
        "dropout_rate": 0.1,
        "use_layer_norm": true,
        "activation": "gelu",
        "loss_weight": 0.5,
        "description": "Projects 384D nuclear bottleneck to 768D for vec2text concept prediction",
        "purpose": "Question answering and concept prediction from compressed representations",
        "expected_params": 663552
      },
      "reconstruction_head": {
        "enabled": true,
        "type": "linear_reconstruction",
        "input_dim": 384,
        "output_dim": 768,
        "hidden_dims": [512, 768],
        "dropout_rate": 0.1,
        "use_layer_norm": true,
        "activation": "gelu",
        "loss_weight": 0.5,
        "learning_rate_multiplier": 1.0,
        "contrastive_loss": {
          "enabled": true,
          "positive_margin": 0.5,
          "negative_margin": 0.2,
          "weight": 0.2,
          "description": "Pulls reconstructed vectors toward positive teacher vectors and away from negatives"
        },
        "description": "Reconstructs variable-dimension nuclear vectors to teacher-like vectors with contrastive alignment"
      },
      "advanced_features": {
        "residual_scaling": 0.8,
        "layer_scale": true,
        "stochastic_depth": 0.1,
        "adaptive_layer_norm": false,
        "nuclear_diversity_scheduling": true
      }
    },
    "early_stopping": {
      "enabled": true,
      "patience":15,
      "min_delta": 0.001,
      "monitor": "total_loss",
      "mode": "min",
      "min_epochs": 20,
      "loss_target": 0.180,
      "loss_target_enabled": true,
      "nuclear_diversity_target": 0.75,
      "attention_diversity_target": 0.3,
      "semantic_coherence_target": 0.65,
      "gps_clustering_target": 3.5,
      "gps_separation_target": -35
    },
    "data": {
      "epochs": 15,
      "vector_preprocessing": {
        "enabled": true,
        "vectorization_model": "sentence-transformers/gtr-t5-base",
        "normalize_vectors": true,
        "vector_format": "float32",
        "preprocessing_batch_size": 1024,
        "augmentation_enabled": true
      },
      "randomness": {
        "duplet_shuffle": false,
        "triplet_shuffle": false,
        "torch_seed": 42,
        "torch_deterministic": true,
        "use_deterministic_algorithms": true,
        "numpy_seed": 42,
        "python_seed": 42
      },
      "datasets": {
        "sciq": 0.90,
        "winogrande": 0.05,
        "conceptnet": 0.05
      },
      "data_format": {
        "type": "simple_triplet",
        "fields": ["anchor", "positive", "negative"],
        "vector_dimension": 768,
        "teacher_model": "sentence-transformers/gtr-t5-base",
        "description": "Standard SCIQ ANCHOR/POS/NEG format - no complex ABCDE sequences",
        "projection_handling": {
          "core_component": "anchor",
          "spatial_component": "derived_from_anchor",
          "sequential_component": "positional_encoding"
        }
      },
      "dataset_paths": {
        "conceptnet": "data/compositional_reasoner/conceptnet_1M.json"
      },
      "sampling": {
        "samples_per_batch": 10000,
        "num_batches": "1",
        "negative_sampling": "semantic_hard_attention",
        "triplet_mining": "nuclear_attention_optimized",
        "diversity_sampling": true,
        "attention_guided_sampling": true
      },
      "loss_functions": {
        "alignment_loss": {
          "type": "cosine_similarity",
          "description": "Minimal teacher alignment"
        },
        "diversity_loss": {
          "type": "nuclear_diversity",
          "description": "Maximum semantic separation"
        },
        "gps_clustering_loss": {
          "type": "semantic_clustering",
          "description": "GPS coordinate clustering by semantic domain"
        },
        "gps_smoothness_loss": {
          "type": "path_smoothness",
          "description": "Smooth semantic trajectories"
        },
        "gps_separation_loss": {
          "type": "domain_separation",
          "description": "Distinct semantic domains"
        },
        "gps_efficiency_loss": {
          "type": "coordinate_efficiency",
          "description": "Prevent coordinate overcrowding"
        }
      },
      "hyperparameters": {
        "loss_function": "hybrid_nuclear_attention_diversity",
        "learning_rate": 0.0012,
        "batch_size": 64,
        "optimizer": "adamw",
        "optimizer_params": {
          "betas": [0.9, 0.999],
          "eps": 1e-8,
          "weight_decay": 1e-5,
          "amsgrad": false
        },
        "gradient_clipping": 1.0,
        "gradient_accumulation_steps": 2,
        "warmup_steps": 0,
        "lr_scheduling": {
          "enabled": true,
          "type": "cosine_annealing_warm_restarts",
          "params": {
            "T_0": 4,
            "T_mult": 2,
            "eta_min": 1e-6,
            "warmup_steps": 0
          }
        }
      },
      "caching": {
        "enabled": true,
        "duplet_cache": true,
        "triplet_cache": true
      },
      "splits": {
        "train": 0.75,
        "val": 0.15,
        "test": 0.1
      },
      "device": {
        "type": "mps",
        "description": "Apple Silicon M4 optimization"
      },
      "augmentation": {
        "enabled": true,
        "vector_noise": 0.02,
        "dropout_concepts": true,
        "attention_noise": 0.01,
        "concept_masking": 0.1
      }
    }
  },
  "testing": {
    "datasets": {
      "sciq": 0.70,
      "winogrande": 0.10,
      "conceptnet": 0.20
    },
    "vec2text_integration": {
      "enabled": true,
      "teacher_model": "sentence-transformers/gtr-t5-base",
      "local_teacher_path": "data/teacher_models/gtr-t5-base",
      "vec2text_corrector": "gtr-base",
      "test_iterations": 50,
      "sample_count": 10,
      "datasets": ["sciq", "apps_code", "ai2_arc"],
      "native_768d_compatibility": true
    },
    "semantic_gps_tests": {
      "enabled": true,
      "coordinate_analysis": true,
      "trajectory_visualization": true,
      "domain_clustering_validation": true,
      "navigation_tests": [
        {"from": "glucose", "to": "enzyme", "steps": 10},
        {"from": "programming", "to": "biology", "steps": 15},
        {"from": "physics", "to": "chemistry", "steps": 8}
      ]
    },
    "semantic_gps_testing": {
      "enabled": true,
      "test_semantic_coordinates": true,
      "concept_clustering_analysis": true,
      "vector_arithmetic_tests": true
    },
    "randomness": {
      "duplet_shuffle": false,
      "triplet_shuffle": false
    },
    "semantic_gps_tracking": {
      "enabled": true,
      "target_coordinates": ["glucose", "insulin", "protein", "energy"],
      "bottleneck_monitoring": true,
      "attention_pattern_analysis": true
    },
    "validations": {
      "vector_arithmetic": {
        "enabled": true,
        "test_mode": "ln_only",
        "dataset": "tmikolov/word2vec GitHub repository",
        "target_accuracy": 0.8,
        "evaluation_method": "continuous_scoring",
        "input_files": [
          "data/vector_arithmetic/analogy_dataset_verb_present_participle.txt",
          "data/vector_arithmetic/test_analogies.txt",
          "data/vector_arithmetic/questions-words.txt",
          "data/vector_arithmetic/analogy_dataset_family_relations.txt"
        ],
        "sample_size": 200,
        "default_expected_value": 0.6
      },
      "semantic_pairs": {
        "enabled": true,
        "evaluation_method": "continuous_scoring",
        "target_overall_score": 0.8,
        "minimum_individual_score": 0.8,
        "test_cases": [
          {
            "pair": [
              "cat",
              "dog"
            ],
            "description": "Related animals",
            "expected": 0.7
          },
          {
            "pair": [
              "car",
              "automobile"
            ],
            "description": "Perfect synonyms",
            "expected": 0.95
          },
          {
            "pair": [
              "science",
              "mathematics"
            ],
            "description": "Related fields",
            "expected": 0.8
          },
          {
            "pair": [
              "happy",
              "sad"
            ],
            "description": "Emotional opposites",
            "expected": 0.2
          },
          {
            "pair": [
              "dog",
              "car"
            ],
            "description": "Unrelated concepts",
            "expected": 0.1
          },
          {
            "pair": [
              "apple",
              "fruit"
            ],
            "description": "Category-instance",
            "expected": 0.85
          },
          {
            "pair": [
              "king",
              "queen"
            ],
            "description": "Gendered counterparts",
            "expected": 0.85
          },
          {
            "pair": [
              "water",
              "ice"
            ],
            "description": "State variants",
            "expected": 0.75
          },
          {
            "pair": [
              "phone",
              "communication"
            ],
            "description": "Tool-purpose",
            "expected": 0.8
          },
          {
            "pair": [
              "sun",
              "star"
            ],
            "description": "Instance-category",
            "expected": 0.9
          }
        ]
      },
      "hierarchy": {
        "enabled": true,
        "evaluation_method": "continuous_scoring",
        "target_overall_score": 0.5,
        "minimum_individual_score": 0.6,
        "cross_domain_max_score": 0.4,
        "input_files": [
          "data/vector_hierarchy/hyperlex_data/hyperlex-all.txt"
        ],
        "sample_size": 500,
        "default_expected_value": 0.6
      }
    },
    "nuclear_diversity_metrics": {
      "enabled": true,
      "diversity_threshold": 0.85,
      "coherence_threshold": 0.7,
      "overall_score_target": 0.8
    }
  },
  "logging": {
    "interval": 10,
    "checkpoint_interval": "best_val",
    "metrics_to_track": [
      "nuclear_diversity_score",
      "semantic_coherence_score",
      "compression_efficiency",
      "vector_similarity_preservation",
      "semantic_gps_coordinates",
      "projection_mse",
      "projection_cosine"
    ]
  },
  "deployment": {
    "vector_input_only": true,
    "text_preprocessing_pipeline": "external"
  },
  "pipeline": {
    "stages": [
      "duplet_generation",
      "triplet_extraction",
      "train",
      "test"
    ]
  },
  "evaluation": {
    "test_framework": "vector_native_ln_testing",
    "primary_metric": "continuous_semantic_score",
    "target_overall_score": 0.65,
    "semantic_gps_validation": true,
    "concept_separation_analysis": true,
    "success_criteria": {
      "nuclear_diversity_min": 0.7,
      "semantic_coherence_min": 0.6,
      "compression_efficiency_min": 1.4,
      "target_grade": "A+ LN Master"
    }
  },
  "coordinate_precision_testing": {
    "enabled": true,
    "tolerance": 1e-4,
    "cross_model_consistency": true,
    "dimension_stability_threshold": 0.001
  },
  "research": {
    "mechanistic_interpretability": {
      "enabled": true,
      "track_concepts": ["glucose", "democracy", "intelligence", "energy"],
      "compression_analysis": true,
      "concept_tracking_layers": ["input_384", "compressed_256", "output_384"],
      "semantic_gps_mapping": true
    },
    "nuclear_diversity_analysis": {
      "concept_separation_matrix": true,
      "diversity_gradients": true,
      "compression_quality_metrics": true
    }
  },
  "experimental_features": {
    "anchored_semantic_gps": {
      "enabled": true,
      "universal_coordinate_system": true,
      "landmark_registry_path": "data/semantic_landmarks/universal_landmarks.pkl",
      "calibration_enabled": true
    },
    "ai_geosemantics": {
      "enabled": true,
      "semantic_navigation": true,
      "concept_surgery": true,
      "interpretability_tools": true
    }
  }
}