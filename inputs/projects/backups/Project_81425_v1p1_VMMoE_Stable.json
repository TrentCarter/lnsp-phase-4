{
  "project": {
    "metadata": {
      "id": "VMMoE_Production_V2",
      "name": "VMMoE Production Training - Full Dataset",
      "description": "Production training run with 50 epochs, full 60k vectors, optimized hyperparameters",
      "version": "1.1.0",
      "created_date": "2025-08-14",
      "training_date": "2025-08-14T13:xx",
      "notes": "Optimized production run - 250x more training steps, 50x higher LR, full dataset"
    },
    "model": "sentence-transformers/gtr-t5-base",
    "local_model_path": "data/teacher_models/gtr-t5-base"
  },
  "training": {
    "architecture": {
      "mamba_config": {
        "d_model": 768,
        "n_layers": 4,
        "d_state": 16,
        "d_conv": 4,
        "expand": 1.5,
        "dt_rank": "auto",
        "dt_min": 0.001,
        "dt_max": 0.1,
        "dt_init": "random",
        "dt_scale": 1.0,
        "bias": false,
        "conv_bias": true
      },
      "positional_config": {
        "mode": "learned",
        "max_len": 512
      }
    },
    "loss_config": {
      "loss_type": "triplet",
      "margin_start": 0.05,
      "margin_end": 0.2,
      "margin_schedule": "linear",
      "cosine_weight": 0.8,
      "mse_weight": 0.1,
      "contrastive_weight": 0.1,
      "orthogonality_weight": 0.001
    },
    "optimization": {
      "optimizer": "AdamW",
      "learning_rate": 5e-05,
      "weight_decay": 0.01,
      "gradient_clipping": 0.5,
      "warmup_steps": 2500,
      "scheduler": "cosine"
    },
    "data": {
      "batch_size": 16,
      "sequence_length": 16,
      "num_workers": 0,
      "shuffle": true,
      "drop_last": true,
      "concept_databases": [
        "data/databases/concept_vector_db_768_training"
      ]
    },
    "training_params": {
      "epochs": 50,
      "steps_per_epoch": 500,
      "validation_frequency": 10,
      "checkpoint_frequency": 100,
      "device_priority": [
        "mps",
        "cuda",
        "cpu"
      ]
    },
    "early_stopping": {
      "enabled": true,
      "patience": 5,
      "min_delta": 0.00001,
      "monitor": "val/loss",
      "mode": "min",
      "min_epochs": 3,
      "loss_target": 0.01,
      "loss_target_enabled": true,
      "verbose": true
    }
  },
  "evaluation": {
    "validation_split": 0.05,
    "metrics": [
      "retrieval_at_1",
      "mean_cosine_similarity",
      "triplet_accuracy"
    ]
  },
  "mlflow": {
    "tracking_uri": "http://localhost:5006",
    "experiment_name": "vmmoe_stable",
    "run_name_prefix": "production_v2",
    "log_models": true,
    "log_metrics_frequency": 1
  },
  "checkpointing": {
    "checkpoint_dir": "output/vmmoe_stable",
    "save_best": true,
    "embed_config": true
  },
  "improvements": {
    "from_v1.0": {
      "epochs": "5 → 50 (10x increase)",
      "steps_per_epoch": "20 → 500 (25x increase)", 
      "total_training_steps": "100 → 25,000 (250x increase)",
      "learning_rate": "1e-06 → 5e-05 (50x increase)",
      "batch_size": "4 → 16 (4x increase)",
      "warmup_steps": "100 → 2,500 (25x increase)",
      "validation_split": "10% → 5% (more training data)",
      "dataset_usage": "500 vectors → 60,000 vectors (120x increase)",
      "expected_training_time": "53s → 2-3 hours"
    }
  }
}